---
// src/layouts/Layout.astro
import '../styles/global.css';

interface Props {
    title?: string;
}

const { title = "Mi Portafolio" } = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    
    <!-- Se actualiza la referencia del favicon para usar un archivo PNG. -->
    <link rel="icon" type="image/png" href="/favicon.png" />
    
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <script is:inline>
        // Este script se ejecuta antes de que se renderice la pÃ¡gina
        // para evitar el parpadeo del tema (FOUC).
        const theme = (() => {
            if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
                return localStorage.getItem('theme');
            }
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                return 'dark';
            }
            return 'light';
        })();

        if (theme === 'dark') {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="antialiased selection:bg-[var(--color-accent)]/30">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <header class="flex justify-end py-6">
        <button
            id="theme-toggle"
            class="p-2 rounded-full transition-colors cursor-pointer text-[var(--color-text-muted)] hover:text-[var(--color-accent)] hover:bg-[var(--color-bg-card)]"
            aria-label="Cambiar tema"
        >
            <!-- Sun Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="size-6 hidden dark:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
              <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
            </svg>
            <!-- Moon Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="size-6 block dark:hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
            </svg>
        </button>
    </header>

    <main>
        <slot />
    </main>

</div>

<script>
    const themeToggle = document.getElementById("theme-toggle");

    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");

        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    themeToggle?.addEventListener("click", handleToggleClick);
</script>
</body>
</html>